<div class="container">
    <div class="table-wrapper">
        <div class="table-title">
            <div class="row">
                <div class="col-sm-6">
                    <h2>Modulo<b> Administrador</b></h2>
                </div>
                <div class="col-sm-6">
                    <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal">
                        <i class="fas fa-plus-square"></i><span>Añadir Nueva Pelicula</span></a>
                </div>
            </div>
        </div>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Sala</th>
                    <th>Hora y Fecha</th>
                    <th>Asiento Disponibles</th>
                    <th>Precio</th>
                    <th>------</th>
                </tr>
            </thead>
            <tbody class="list group">
                <tr>
                    <td *ngFor="let peliAdmin of peliculaAdministrador">{{peliAdmin.titulo}}</td>
                    <td *ngFor="let peliAdmin of peliculaAdministrador">{{peliAdmin.nombre}}</td>
                    <td *ngFor="let horaFechaAdmin of horaFechaAdministrador">{{horaFechaAdmin.fecha}} -
                        {{horaFechaAdmin.hora}}</td>
                    <td *ngFor="let reservaAdmin of reservaAdministrador">{{reservaAdmin.count}}</td>
                    <td *ngFor="let precioA of precioAdministrador">$ {{precioA.precio}}.00</td>
                    <td>
                        <a href="#editEmployeeModal" data-toggle="modal"><i class="fas fa-edit"></i></a>
                        <a href="#deleteEmployeeModal" data-toggle="modal"><i class="fas fa-trash-alt"></i></a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<!--Mostrar todas peliculas-->
<div class="col-md-3" *ngFor="let pelicula of peli">
    <div class="card card-body text-center">
        <img [src]="pelicula.imagen" class="card-img-top">
        <button class="btn btn-secondary" (click)='getJoinPelicula(pelicula)'>
            <i class="far fa-trash-alt"> SELECCIONAR PELICULA</i>
        </button>
    </div>
</div>

<!-- Add Modal HTML -->
<div id="addEmployeeModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form class="form-group">
                <div class="modal-header">
                    <h4 class="modal-title">Añadir nueva Pelicula</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col">
                            Titulo<input type="text" class="form-control" [(ngModel)]="pelicula.titulo" name="titulo"
                                placeholder="Nombre">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Formato Video<select class="form-control" name="id" [(ngModel)]="formatosVideos.id">
                                <option *ngFor="let formatoVideo of formatoVideo" [value]="formatoVideo.id">
                                    {{formatoVideo.nombre}}</option>
                            </select>
                        </div>
                        <div class="col">
                            Duracion<input type="text" class="form-control" [(ngModel)]="pelicula.duracion"
                                name="duracion" placeholder="Duracion">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Precio<select class="form-control" name="precio" [(ngModel)]="precios.id">
                                <option *ngFor="let precio of formatoVideo" [value]="precio.id">$ {{precio.precio}}.00
                                </option>
                            </select>
                        </div>
                        <div class="col">
                            Imagen<div class="input-group">
                                <div class="custom-file">
                                    <input type="url" class="form-control" placeholder="Inserte url de la imagen"
                                        name="imagen" [(ngModel)]="pelicula.imagen">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        Genero<select class="form-control" name="genero" [(ngModel)]="generos.id">
                            <option *ngFor="let gen of genero" [ngValue]="gen.id">{{gen.nombre}}</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="col">
                            Hora<select class="form-control" name="id" [(ngModel)]="horasFechas.id">
                                <option *ngFor="let horaFecha of horaFecha" [value]="horaFecha.id">
                                    {{horaFecha.hora}}
                                </option>
                            </select>
                        </div>
                        <div class="col">
                            Fecha<input class="form-control" type="date" value="2019-08-06" name="fecha"
                                [(ngModel)]="horasFechas.fecha">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                    <input type="submit" class="btn btn-success" value="Añadir" (click)="createPelicula()">
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Edit Modal HTML -->
<div id="editEmployeeModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form class="form-group">
                <div class="modal-header">
                    <h4 class="modal-title" *ngFor="let peliAdmin of peliculaAdministrador">Actualizar la Pelicula
                        "{{peliAdmin.titulo}}"</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col" *ngFor="let peliAdmin of peliculaAdministrador">
                            Titulo<input type="text" class="form-control" [(ngModel)]="pelicula.titulo" name="titulo"
                                placeholder="{{peliAdmin.titulo}}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Formato Video<select class="form-control" name="id" [(ngModel)]="formatosVideos.id">
                                <option *ngFor="let formatoVideo of formatoVideo" [value]="formatoVideo.id">
                                    {{formatoVideo.nombre}}</option>
                            </select>
                        </div>
                        <div class="col">
                            Duracion<input type="text" class="form-control" [(ngModel)]="pelicula.duracion"
                                name="duracion" placeholder="Duracion">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            Precio<select class="form-control" name="precio" [(ngModel)]="precios.id">
                                <option *ngFor="let precio of formatoVideo" [value]="precio.id">$ {{precio.precio}}.00
                                </option>
                            </select>
                        </div>
                        <div class="col">
                            Imagen<div class="input-group">
                                <div class="custom-file">
                                    <input type="url" class="form-control" placeholder="Inserte url de la imagen"
                                        name="imagen" [(ngModel)]="pelicula.imagen">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        Genero<select class="form-control" name="genero" [(ngModel)]="generos.id">
                            <option *ngFor="let gen of genero" [ngValue]="gen.id">{{gen.nombre}}</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="col">
                            Hora<select class="form-control" name="id" [(ngModel)]="horasFechas.id">
                                <option *ngFor="let horaFecha of horaFecha" [value]="horaFecha.id">
                                    {{horaFecha.hora}}
                                </option>
                            </select>
                        </div>
                        <div class="col">
                            Fecha<input class="form-control" type="date" value="2019-08-06" name="fecha"
                                [(ngModel)]="horasFechas.fecha">
                        </div>
                    </div>
                </div>
                <div class="modal-footer" *ngFor="let peliAdmin of peliculaAdministrador">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                    <input type="submit" class="btn btn-success" value="Añadir" (click)="updatePelicula(peliAdmin.id)">
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Delete Modal HTML -->
<div id="deleteEmployeeModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h4 class="modal-title">Borrar Pelicula</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <p>¿Está seguro de que desea eliminar esta pelicula?</p>
                    <p class="text-warning">
                        <small>Esta acción no se puede deshacer.</small>
                    </p>
                </div>
                <div class="modal-footer" *ngFor="let peliAdmin of peliculaAdministrador">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cacelar">
                    <input type="submit" class="btn btn-danger" value="Borrar" (click)="deletePelicula(peliAdmin.id)">
                </div>
            </form>
        </div>
    </div>
</div>